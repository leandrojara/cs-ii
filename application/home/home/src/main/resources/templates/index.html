<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>House Catalog</title>

    <link rel="stylesheet" type="text/css" href="../../resources/static/css/reset.css" th:href="@{/css/reset.css}">
    <link rel="stylesheet" type="text/css" href="../../resources/static/css/main.css" th:href="@{/css/main.css}">
</head>

<body>

<div id="div-central">

    <header id="header">

        <div id="div-logo">
            <img src="../../resources/static/imagens/logo.png" th:src="@{/imagens/logo.png}" id="logo-header"/>
        </div>

        <div th:insert="fragments/header.html::login"></div>

        <div th:insert="fragments/header.html::menu"></div>

    </header>

    <section id="section-conteudo">
        <div th:if="!${imoveis.isEmpty()}">

            <h1>Im√≥veis Recentes</h1>

            <div class="quadro-anuncio" th:each="imovel, iterator : ${imoveis}">
                <a th:href="@{'/imovel/visualizar/' + ${imovel.id}}">
                    <div class="w3-content w3-display-container" th:if="!${imovel.imagens.isEmpty()}">
                        <img th:class="${'imgAnuncio mySlides'+iterator.index}"
                             th:src="${imagem.getBytesImgFormatted()}"
                             style="width:100%;"
                             th:styleappend="${iteratorImg.index} > 0 ? 'display:none;' : 'display:block;'"
                             th:each="imagem, iteratorImg: ${imovel.imagens}">

                        <img class="w3-button w3-black w3-display-left"
                             th:onclick="'plusDivs(-1, \''+${iterator.index}+'\');'"
                             src="../../resources/static/imagens/arrow_back.png" th:src="@{/imagens/arrow_back.png}">
                        <img class="w3-button w3-black w3-display-right"
                             th:onclick="'plusDivs(1, \''+${iterator.index}+'\');'"
                             src="../../resources/static/imagens/arrow_after.png" th:src="@{/imagens/arrow_after.png}">
                    </div>

                    <img src="../../resources/static/imagens/no-image.jpg" th:src="@{/imagens/no-image.jpg}" width="100%"
                         th:if="${imovel.imagens.isEmpty()}"/>

                    <h2 th:text="${imovel.getDescription()}"></h2>
                    <p th:text="${imovel.descricao}"></p>

                    <div class="rodape-quadro-anuncio">
                        <div class="rodape-quadro-anuncio-preco" th:text="${imovel.getValorStr()}">R$ 250.000,00</div>
                    </div>
                </a>
            </div>
        </div>
    </section>

</div>

</body>

<script>
    var slideIndex = [];

    function plusDivs(n, no) {
        while (slideIndex.length < no + 1) {
            slideIndex.push(1);
        }

        showDivs(slideIndex[no] += n, no);
    }

    function showDivs(n, no) {
        var i;
        var x = document.getElementsByClassName('mySlides' + no);
        if (n > x.length) {
            slideIndex[no] = 1
        }
        if (n < 1) {
            slideIndex[no] = x.length
        }
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        x[slideIndex[no] - 1].style.display = "block";
    }
</script>

</html>